{"version":3,"sources":["webpack:///./src/app/modulos/inp/components/inspeccion-form/inspeccion-form.component.html","webpack:///./src/app/modulos/inp/components/inspeccion-form/inspeccion-form.component.scss","webpack:///./src/app/modulos/inp/components/inspeccion-form/inspeccion-form.component.ts","webpack:///./src/app/modulos/inp/components/inspeccion-no-programada/inspeccion-no-programada.component.html","webpack:///./src/app/modulos/inp/components/inspeccion-no-programada/inspeccion-no-programada.component.scss","webpack:///./src/app/modulos/inp/components/inspeccion-no-programada/inspeccion-no-programada.component.ts","webpack:///./src/app/modulos/inp/components/inspeccion-pendiente/inspeccion-pendiente.component.html","webpack:///./src/app/modulos/inp/components/inspeccion-pendiente/inspeccion-pendiente.component.scss","webpack:///./src/app/modulos/inp/components/inspeccion-pendiente/inspeccion-pendiente.component.ts","webpack:///./src/app/modulos/inp/components/inspecciones-sync/inspecciones-sync.component.html","webpack:///./src/app/modulos/inp/components/inspecciones-sync/inspecciones-sync.component.scss","webpack:///./src/app/modulos/inp/components/inspecciones-sync/inspecciones-sync.component.ts","webpack:///./src/app/modulos/inp/components/menu-lista/menu-lista.component.html","webpack:///./src/app/modulos/inp/components/menu-lista/menu-lista.component.scss","webpack:///./src/app/modulos/inp/components/menu-lista/menu-lista.component.ts","webpack:///./src/app/modulos/inp/components/pregunta-inspeccion/pregunta-inspeccion.component.html","webpack:///./src/app/modulos/inp/components/pregunta-inspeccion/pregunta-inspeccion.component.scss","webpack:///./src/app/modulos/inp/components/pregunta-inspeccion/pregunta-inspeccion.component.ts","webpack:///./src/app/modulos/inp/components/programacion-inspecciones/programacion-inspecciones.component.html","webpack:///./src/app/modulos/inp/components/programacion-inspecciones/programacion-inspecciones.component.scss","webpack:///./src/app/modulos/inp/components/programacion-inspecciones/programacion-inspecciones.component.ts","webpack:///./src/app/modulos/inp/entities/calificacion.ts","webpack:///./src/app/modulos/inp/entities/elemento-inspeccion.ts","webpack:///./src/app/modulos/inp/entities/inspeccion.ts","webpack:///./src/app/modulos/inp/entities/lista-inspeccion-pk.ts","webpack:///./src/app/modulos/inp/entities/lista-inspeccion.ts","webpack:///./src/app/modulos/inp/entities/tipo-hallazgo.ts","webpack:///./src/app/modulos/inp/pages/elaboracion-inspeccion/elaboracion-inspeccion.module.ts","webpack:///./src/app/modulos/inp/pages/elaboracion-inspeccion/elaboracion-inspeccion.page.html","webpack:///./src/app/modulos/inp/pages/elaboracion-inspeccion/elaboracion-inspeccion.page.scss","webpack:///./src/app/modulos/inp/pages/elaboracion-inspeccion/elaboracion-inspeccion.page.ts"],"names":[],"mappings":"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","file":"modulos-inp-pages-elaboracion-inspeccion-elaboracion-inspeccion-module.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"anterior()\\\" [disabled]=\\\"guardando == true\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-back\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title (click)=\\\"abrirMenu()\\\">\\r\\n      Elementos {{numeroRespondidas}}/{{indicePreguntas.length}}\\r\\n      <!-- \\r\\n      <div *ngIf=\\\"loadingArea == true\\\">\\r\\n        <ion-spinner name=\\\"dots\\\" color=\\\"light\\\"></ion-spinner>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"areasCargadas == false\\\">\\r\\n        <a style=\\\"color:white\\\" (click)=\\\"cargarAreas()\\\">--Reintentar cargar areas--</a>\\r\\n      </div>\\r\\n\\r\\n      <ion-select *ngIf=\\\"!esProgramada && areasCargadas == true\\\" placeholder=\\\"Seleccione área\\\" [(ngModel)]=\\\"area\\\" [disabled]=\\\"guardando == true\\\">\\r\\n        <ion-select-option *ngFor=\\\"let area of areasList\\\" [value]=\\\"area\\\">{{area.nombre}}</ion-select-option>\\r\\n      </ion-select> -->\\r\\n\\r\\n\\r\\n    </ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button (click)=\\\"siguiente()\\\" *ngIf=\\\"!visibleGuardar && listaCargada == true\\\" [disabled]=\\\"guardando == true\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-forward\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <div *ngIf=\\\"loadingLI == true\\\">\\r\\n    <ion-spinner class=\\\"main-spinner\\\" name=\\\"dots\\\" color=\\\"primary\\\"></ion-spinner>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"listaCargada == false\\\">\\r\\n    <p style=\\\"color:#888;padding:25px\\\">\\r\\n      No fue posible cargar la lista de inspección\\r\\n      <a *ngIf=\\\"listaCargada == false\\\" (click)=\\\"cargarListaInsp()\\\">Reintentar</a>\\r\\n    </p>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"guardando == true\\\" style=\\\"width: 320px; margin:auto; text-align: center;\\\">\\r\\n    <h6>Guardando inspección, por favor espere...</h6>\\r\\n    <ion-spinner class=\\\"main-spinner\\\" name=\\\"dots\\\" color=\\\"primary\\\"></ion-spinner>\\r\\n  </div>\\r\\n\\r\\n  <div [style.display]=\\\"guardando != true ? 'block':'none'\\\">\\r\\n    <ion-item *ngIf=\\\"listaCargada == true\\\">\\r\\n      <ion-label>{{listaInspeccion?.nombre}}</ion-label>\\r\\n    </ion-item>\\r\\n    <ion-item *ngIf=\\\"listaInspeccion?.descripcion && listaCargada == true\\\">\\r\\n      <ion-note style=\\\"padding:10px;\\\">{{listaInspeccion?.descripcion}}</ion-note>\\r\\n    </ion-item>\\r\\n    <ion-label style=\\\"margin-left:15px;\\\" *ngIf=\\\"esProgramada\\\">{{area?.nombre}}</ion-label>\\r\\n    <sm-areaSelector *ngIf=\\\"!esProgramada\\\" [(ngModel)]=\\\"area\\\" [disabled]=\\\"guardando == true\\\" appendTo=\\\"ion-modal\\\"></sm-areaSelector>\\r\\n    <ion-card *ngIf=\\\"listaCargada == true\\\" [ngClass]=\\\" (numeroPreguntaActual == -1) ? 'mostrar':'ocultar'\\\">\\r\\n      <ion-item>\\r\\n        <sm-formulario *ngIf=\\\"listaInspeccion?.formulario\\\" [ngClass]=\\\" (numeroPreguntaActual == -1) ? 'mostrar':'ocultar'\\\" #formulario\\r\\n          [formularioModel]=\\\"listaInspeccion?.formulario\\\" [respuestasList]=\\\"inspPend?.respuestasCampoList\\\"></sm-formulario>\\r\\n      </ion-item>\\r\\n    </ion-card>\\r\\n\\r\\n    <sm-preguntaInspeccion *ngIf=\\\"elementoSelect\\\" [ngClass]=\\\"(numeroPreguntaActual >= 0) ? 'mostrar':'ocultar'\\\" [elementoInspeccion]=\\\"elementoSelect\\\"\\r\\n      [opcionCalificacionList]=\\\"listaInspeccion.opcionCalificacionList\\\" [usarNivelRiesgo]=\\\"listaInspeccion.usarNivelRiesgo\\\"\\r\\n      [usarTipoHallazgo]=\\\"listaInspeccion.usarTipoHallazgo\\\" (onCalificacionChange)=\\\"registrarCambioCalif($event)\\\">\\r\\n    </sm-preguntaInspeccion>\\r\\n\\r\\n  </div>\\r\\n\\r\\n  <div style=\\\"height: 150px;\\\"></div>\\r\\n  <ion-fab *ngIf=\\\"!guardando && listaCargada == true\\\" vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\r\\n    <ion-fab-button (click)=\\\"guardarInspeccion()\\\">\\r\\n      <ion-icon name=\\\"save\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n  </ion-fab>\\r\\n  <ion-fab *ngIf=\\\"!guardando && listaCargada == true\\\" vertical=\\\"bottom\\\" horizontal=\\\"start\\\" slot=\\\"fixed\\\">\\r\\n    <ion-fab-button (click)=\\\"presentAlertaSalir()\\\" color=\\\"light\\\">\\r\\n      <ion-icon name=\\\"undo\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n  </ion-fab>\\r\\n</ion-content>\"","module.exports = \".mostrar {\\n  display: block; }\\n\\n.ocultar {\\n  display: none; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxvcy9pbnAvY29tcG9uZW50cy9pbnNwZWNjaW9uLWZvcm0vQzpcXFVzZXJzXFxERUxMXFxEb3dubG9hZHNcXG9yaWdpbmFsXFxhcHBsZW9uYXJkb1xcYXBwL3NyY1xcYXBwXFxtb2R1bG9zXFxpbnBcXGNvbXBvbmVudHNcXGluc3BlY2Npb24tZm9ybVxcaW5zcGVjY2lvbi1mb3JtLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksY0FBYyxFQUFBOztBQUVsQjtFQUNJLGFBQWEsRUFBQSIsImZpbGUiOiJzcmMvYXBwL21vZHVsb3MvaW5wL2NvbXBvbmVudHMvaW5zcGVjY2lvbi1mb3JtL2luc3BlY2Npb24tZm9ybS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tb3N0cmFye1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuLm9jdWx0YXJ7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59Il19 */\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ModalController, AlertController, ToastController, PopoverController } from '@ionic/angular';\r\nimport { Programacion } from '../../entities/programacion';\r\n\r\nimport { ListaInspeccionService } from '../../services/lista-inspeccion.service';\r\nimport { InspeccionService } from '../../services/inspeccion.service';\r\nimport { ListaInspeccion } from '../../entities/lista-inspeccion';\r\nimport { ElementoInspeccion } from '../../entities/elemento-inspeccion';\r\nimport { Calificacion } from '../../entities/calificacion';\r\nimport { Inspeccion } from '../../entities/inspeccion';\r\nimport { FormularioComponent } from '../../../com/components/formulario/formulario.component';\r\nimport { RespuestaCampo } from '../../../com/entities/respuesta-campo';\r\nimport { Util } from '../../../com/utils/util'\r\nimport { OfflineService } from '../../../com/services/offline.service';\r\nimport { MensajeUsuarioService } from '../../../com/services/mensaje-usuario.service';\r\nimport { DirectorioService } from '../../../ado/services/directorio.service';\r\nimport { Area } from '../../../emp/entities/area';\r\nimport { StorageService } from '../../../com/services/storage.service';\r\nimport { ListaInspeccionPK } from '../../entities/lista-inspeccion-pk';\r\nimport { MenuListaComponent } from '../menu-lista/menu-lista.component';\r\n\r\n@Component({\r\n  selector: 'sm-inspeccionForm',\r\n  templateUrl: './inspeccion-form.component.html',\r\n  styleUrls: ['./inspeccion-form.component.scss'],\r\n  providers: [InspeccionService]\r\n})\r\nexport class InspeccionFormComponent implements OnInit {\r\n\r\n  @ViewChild('formulario') formulario: FormularioComponent;\r\n  programacion: Programacion;\r\n  listaInspeccion: ListaInspeccion;\r\n  elementoSelect: ElementoInspeccion;\r\n  numeroPreguntaActual: number = -1;\r\n  indicePreguntas: any = [];\r\n  visibleGuardar: boolean;\r\n  area: Area;\r\n  esProgramada: boolean;\r\n  areasList: Area[];\r\n\r\n  guardando: boolean;\r\n  loadingLI: boolean;\r\n  listaCargada: boolean;\r\n  listaPk: ListaInspeccionPK;\r\n\r\n  loadingArea: boolean;\r\n  areasCargadas: boolean;\r\n  inspPend: Inspeccion;\r\n\r\n  numeroRespondidas = 0;\r\n\r\n  constructor(\r\n    public popoverController: PopoverController,\r\n    public toastController: ToastController,\r\n    public storageService: StorageService,\r\n    public alertController: AlertController,\r\n    public modalController: ModalController,\r\n    public listaInspeccionService: ListaInspeccionService,\r\n    public inspeccionService: InspeccionService,\r\n    public offlineService: OfflineService,\r\n    public msgService: MensajeUsuarioService,\r\n    public dirService: DirectorioService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.modalController.getTop()\r\n      .then(data => {\r\n        let parametro = (<any>data).componentProps;\r\n\r\n        if (parametro.programacion != null) {\r\n          this.esProgramada = true;\r\n          this.programacion = parametro.programacion;\r\n          this.listaPk = this.programacion.listaInspeccion.listaInspeccionPK;\r\n          this.area = this.programacion.area;\r\n        } else if (parametro.listaInspeccion != null) {\r\n          this.esProgramada = false;\r\n          this.listaPk = (<ListaInspeccion>parametro.listaInspeccion).listaInspeccionPK;\r\n        } else if (parametro.inspeccion) {\r\n          this.programacion = (<Inspeccion>parametro.inspeccion).programacion;\r\n          this.esProgramada = this.programacion != null;\r\n          this.inspPend = parametro.inspeccion;\r\n          if (this.esProgramada) {\r\n            this.listaPk = this.programacion.listaInspeccion.listaInspeccionPK;\r\n            this.area = this.programacion.area;\r\n          } else {\r\n            this.listaPk = (<Inspeccion>parametro.inspeccion).listaInspeccion.listaInspeccionPK;\r\n            this.area = (<Inspeccion>parametro.inspeccion).area;\r\n          }\r\n        }\r\n        this.cargarListaInsp();\r\n      });\r\n  }\r\n\r\n  construirListaAreas(listado: Area[], areas: Area[]) {\r\n    for (let i = 0; i < areas.length; i++) {\r\n      let area = areas[i];\r\n      let areaObj = <Area>{ id: area.id, nombre: area.nombre };\r\n      listado.push(areaObj);\r\n      if (area.areaList != null && area.areaList.length > 0) {\r\n        this.construirListaAreas(listado, area.areaList);\r\n      }\r\n    }\r\n  }\r\n\r\n  cargarListaInsp() {\r\n    this.loadingLI = true;\r\n    this.listaCargada = null;\r\n    this.offlineService.queryListaInspeccion(this.listaPk.id, this.listaPk.version)\r\n      .then(data => {\r\n        this.listaInspeccion = (<ListaInspeccion[]>data['data'])[0];\r\n        this.indexarElementos(this.listaInspeccion.elementoInspeccionList, null);\r\n        this.loadingLI = false;\r\n        this.listaCargada = true;\r\n        if (this.inspPend != null) {\r\n          this.cargarInspeccion();\r\n        }\r\n      })\r\n      .catch(err => {\r\n        this.loadingLI = false;\r\n        this.listaCargada = false;\r\n      });\r\n  }\r\n\r\n  cargarInspeccion() {\r\n    this.numeroRespondidas = 0;\r\n    for (let i = 0; i < this.inspPend.calificacionList.length; i++) {\r\n      let calf = this.inspPend.calificacionList[i];\r\n      if (calf == null)\r\n        continue;\r\n      for (let j = 0; j < this.indicePreguntas.length; j++) {\r\n        let elem: ElementoInspeccion = this.indicePreguntas[j];\r\n        if (elem.id == calf.elementoInspeccion.id) {\r\n          this.numeroRespondidas += (calf.opcionCalificacion != null ? 1 : 0);\r\n          elem.calificacion = calf;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n  indexarElementos(list: ElementoInspeccion[], padre: ElementoInspeccion) {\r\n    list.forEach(element => {\r\n      element.elementoInspeccionPadre = padre;\r\n      if (element.elementoInspeccionList == null || element.elementoInspeccionList.length <= 0) {\r\n        this.indicePreguntas.push(element);\r\n      } else {\r\n        this.indexarElementos(element.elementoInspeccionList, element);\r\n      }\r\n    });\r\n  }\r\n\r\n  anterior() {\r\n    if (!this.validarRequerirFoto()) {\r\n      return;\r\n    }\r\n    this.numeroPreguntaActual -= 1;\r\n    if (this.numeroPreguntaActual < -1) {\r\n      this.numeroPreguntaActual = -1;\r\n      this.presentAlertaSalir();\r\n      return;\r\n    }\r\n    if (this.numeroPreguntaActual < this.indicePreguntas.length - 1 && this.numeroPreguntaActual >= 0) {\r\n      this.visibleGuardar = false;\r\n      this.asignarElemento();\r\n    }\r\n  }\r\n\r\n  async presentAlertaSalir() {\r\n    const alert = await this.alertController.create({\r\n      header: 'Salir de la inspección',\r\n      message: '¿Que acción desea realizar?',\r\n      buttons: [{\r\n        text: 'Salir y descartar avances realizados',\r\n        handler: () => this.confirmarSalir()\r\n      },\r\n      {\r\n        text: 'Salir y guardar avances realizados',\r\n        handler: () => {\r\n          let inspeccion = this.generarInspeccion();\r\n          if (this.inspPend == null) {\r\n            inspeccion.fechaRealizada = new Date();\r\n            inspeccion['hash'] = inspeccion.fechaRealizada.getTime();\r\n            this.storageService.guardarInspeccionPendiente(inspeccion);\r\n          } else {\r\n            inspeccion.fechaRealizada = this.inspPend.fechaRealizada;\r\n            inspeccion['hash'] = this.inspPend['hash'];\r\n            this.storageService.actualizarInspeccionPendiente(inspeccion);\r\n          }\r\n          this.modalController.dismiss();\r\n        }\r\n      },\r\n      {\r\n        text: 'Continuar la inspección',\r\n        role: 'cancel'\r\n      }]\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  async confirmarSalir() {\r\n    const alert = await this.alertController.create({\r\n      header: 'Salir de la inspección',\r\n      message: '¿Confirma salir y descartar la inspección actual?',\r\n      buttons: [{\r\n        text: 'Si',\r\n        handler: () => {\r\n          for (let i = 0; i < this.indicePreguntas.length; i++) {\r\n            let imgKey = this.indicePreguntas[i].calificacion == null ? null : this.indicePreguntas[i].calificacion['img_key'];\r\n            if (imgKey != null)\r\n              localStorage.removeItem(imgKey);\r\n          }\r\n          this.modalController.dismiss();\r\n        }\r\n      },\r\n      {\r\n        text: 'No',\r\n        role: 'cancel'\r\n      }]\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n\r\n  siguiente() {\r\n    if (this.numeroPreguntaActual == this.indicePreguntas.length - 1) {\r\n      this.visibleGuardar = true;\r\n      return;\r\n    }\r\n    if (!this.validarRequerirFoto()) {\r\n      return;\r\n    }\r\n\r\n    this.numeroPreguntaActual += 1;\r\n    this.asignarElemento();\r\n  }\r\n\r\n  validarRequerirFoto() {\r\n    if (\r\n      (\r\n        this.elementoSelect != null &&\r\n        this.elementoSelect.calificacion != null &&\r\n        this.elementoSelect.calificacion.opcionCalificacion != null &&\r\n        this.elementoSelect.calificacion.opcionCalificacion.requerirDoc == true\r\n      ) &&\r\n      (\r\n        this.elementoSelect.calificacion['img_key'] == null ||\r\n        this.elementoSelect.calificacion['img_key'].length == 0\r\n      )\r\n    ) {\r\n      this.presentToast(\r\n        \"Debe especificar al menos una fotografía para la calificación \\\"\"\r\n        + this.elementoSelect.calificacion.opcionCalificacion.nombre + \"\\\"\"\r\n      );\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  asignarElemento() {\r\n    this.elementoSelect = this.indicePreguntas[this.numeroPreguntaActual];\r\n  }\r\n\r\n  async presentToast(msg: string) {\r\n    try {\r\n      this.toastController.dismiss();\r\n    } catch (e) { }\r\n\r\n    const toast = await this.toastController.create({\r\n      message: msg,\r\n      position: 'middle',\r\n      duration: 3000\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  generarInspeccion(validar?: boolean): Inspeccion {\r\n    let calificacionList = [];\r\n    for (let i = 0; i < this.indicePreguntas.length; i++) {\r\n      let calf = <Calificacion>this.indicePreguntas[i].calificacion;\r\n      if (validar && (calf == null || calf.opcionCalificacion == null)) {\r\n        this.numeroPreguntaActual = i;\r\n        this.elementoSelect = this.indicePreguntas[this.numeroPreguntaActual];\r\n        this.visibleGuardar = this.numeroPreguntaActual == this.indicePreguntas.length - 1;\r\n        this.presentToast('Por favor especifique la calificación de la pregunta \\\"' + this.elementoSelect.codigo + ' ' + this.elementoSelect.nombre + '\\\"');\r\n        return;\r\n      }\r\n      if (validar && (calf.nivelRiesgo != null && (calf.recomendacion == null || calf.recomendacion.length <= 0))) {\r\n        this.numeroPreguntaActual = i;\r\n        this.elementoSelect = this.indicePreguntas[this.numeroPreguntaActual];\r\n        this.visibleGuardar = this.numeroPreguntaActual == this.indicePreguntas.length - 1;\r\n        this.presentToast('Por favor especifique la descripción del hallazgo según el nivel de riesgo establecido');\r\n        return;\r\n      }\r\n      calificacionList.push(calf);\r\n    }\r\n\r\n    let inspeccion = new Inspeccion();\r\n    inspeccion.calificacionList = calificacionList;\r\n    inspeccion.respuestasCampoList = [];\r\n    if (this.esProgramada) {\r\n      inspeccion.programacion = this.programacion;\r\n    } else {\r\n      inspeccion.area = this.area;\r\n      inspeccion.listaInspeccion = new ListaInspeccion();\r\n      inspeccion.listaInspeccion.listaInspeccionPK = this.listaInspeccion.listaInspeccionPK;\r\n      inspeccion.listaInspeccion.nombre = this.listaInspeccion.nombre;\r\n      inspeccion.listaInspeccion.codigo = this.listaInspeccion.codigo;\r\n    }\r\n\r\n    this.listaInspeccion.formulario.campoList.forEach(campo => {\r\n      let respCampo = new RespuestaCampo();\r\n      respCampo.campoId = campo.id;\r\n      if (campo.tipo == 'timestamp' || campo.tipo == 'date') {\r\n        respCampo.valor = new Date(this.formulario.form.value[campo.id + \"_\" + campo.nombre]);\r\n      } else if (campo.tipo == 'multiple_select' && campo.respuestaCampo.valor != null) {\r\n        respCampo.valor = Util.arrayAString(';', <string[]>campo.respuestaCampo.valor);\r\n      } else {\r\n        respCampo.valor = this.formulario.form.value[campo.id + \"_\" + campo.nombre];\r\n      }\r\n      inspeccion.respuestasCampoList.push(respCampo);\r\n    });\r\n    return inspeccion;\r\n  }\r\n\r\n  guardarInspeccion() {\r\n    if (this.formulario.form.status == 'INVALID') {\r\n      this.numeroPreguntaActual = -1;\r\n      this.visibleGuardar = false;\r\n\r\n      this.presentToast('Por favor diligencie los datos generales faltantes de la inspección');\r\n      return;\r\n    }\r\n    if (!this.esProgramada && this.area == null) {\r\n      this.presentToast('Por favor diligencie el campo ubicación');\r\n      return;\r\n    }\r\n\r\n    let inspeccion = this.generarInspeccion(true);\r\n    if (inspeccion == null)\r\n      return;\r\n\r\n    this.guardando = true;\r\n    this.persistirInspeccion(inspeccion)\r\n      .then(data => {\r\n        this.guardando = false;\r\n        this.manageResponse(data);\r\n        if (this.inspPend != null)\r\n          this.storageService.borrarInspeccionPendiente(this.inspPend);\r\n      })\r\n      .catch(err => {\r\n        this.guardando = false;\r\n      });\r\n  }\r\n\r\n  persistirInspeccion(inspeccion: Inspeccion): Promise<any> {\r\n    if (this.offlineService.getOfflineMode()) {\r\n      return new Promise((resolve, reject) => {\r\n        inspeccion.fechaRealizada = new Date();\r\n        inspeccion['hash'] = inspeccion.fechaRealizada.toISOString();\r\n        this.storageService.guardarInspeccion(inspeccion)\r\n          .then(() => resolve(inspeccion))\r\n          .catch(err => reject(err));\r\n      });\r\n    } else {\r\n      return this.inspeccionService.create(inspeccion)\r\n        .then(resp => {\r\n          let inp = <Inspeccion>resp;\r\n          for (let i = 0; i < inp.calificacionList.length; i++) {\r\n            let calf = inp.calificacionList[i];\r\n            let imgsUrls = inspeccion.calificacionList[i]['img_key'];\r\n            if (imgsUrls != null) {\r\n              let j = 0;\r\n              imgsUrls.forEach(url => {\r\n                if (url != null) {\r\n                  Util.dataURLtoFile(url, 'img_' + i + j + '_inp_calf_' + calf.id + '.jpeg').then(\r\n                    file => this.dirService.upload(file, null, 'INP', calf.id).then(imgResp => localStorage.removeItem(url))\r\n                  );\r\n                }\r\n                j += 1;\r\n              });\r\n            }\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  manageResponse(inspeccion: Inspeccion) {\r\n    this.modalController.dismiss(inspeccion).then(\r\n      resp => this.msgService.showMessage({\r\n        tipoMensaje: 'success',\r\n        mensaje: 'INSPECCIÓN REALIZADA',\r\n        detalle: 'Se ha registrado correctamente la inspección'\r\n      })\r\n    );\r\n  }\r\n\r\n\r\n  async abrirMenu() {\r\n    const popover = await this.popoverController.create({\r\n      component: MenuListaComponent,\r\n      componentProps: { 'listaInspeccion': this.listaInspeccion }\r\n    });\r\n    popover.onDidDismiss()\r\n      .then(param => {\r\n        this.redireccionar(param.data);\r\n      });\r\n    await popover.present();\r\n  }\r\n\r\n  redireccionar(indice: number) {\r\n    if (!this.validarRequerirFoto())\r\n      return;\r\n\r\n    if (indice == null)\r\n      return;\r\n\r\n    this.numeroPreguntaActual = indice;\r\n    this.asignarElemento();\r\n  }\r\n\r\n  registrarCambioCalif(event: any) {\r\n    this.numeroRespondidas = 0;\r\n    this.indicePreguntas.forEach((el: ElementoInspeccion) => {\r\n      if (el.calificacion != null && el.calificacion.opcionCalificacion != null)\r\n        this.numeroRespondidas += 1;\r\n    });\r\n  }\r\n\r\n}\r\n","module.exports = \"\\r\\n<div *ngIf=\\\"loading == true\\\">\\r\\n    <ion-spinner class=\\\"main-spinner\\\" name=\\\"dots\\\" color=\\\"primary\\\"></ion-spinner>\\r\\n  </div>\\r\\n\\r\\n<div *ngIf=\\\"listasCargadas == false\\\">\\r\\n    <p style=\\\"color:#888;padding:25px\\\">\\r\\n        No fue posible cargar las listas de inspección.\\r\\n        <a *ngIf=\\\"listasCargadas == false\\\" (click)=\\\"cargarListas()\\\">Reintentar</a>\\r\\n    </p>\\r\\n</div>\\r\\n\\r\\n<ion-card *ngFor=\\\"let lista of listasInspeccion; let i = index\\\">\\r\\n    <ion-card-header>\\r\\n        <ion-item>\\r\\n            <h6>{{lista.nombre}}</h6>\\r\\n            <ion-button fill=\\\"outline\\\" slot=\\\"end\\\" *sTienePermiso=\\\"['SEC_GET_SISTNR', 'INP_GET_LISTINP']\\\" (click)=\\\"seleccionarLista(lista)\\\">\\r\\n                Realizar\\r\\n            </ion-button>\\r\\n        </ion-item>\\r\\n        <ion-card-content>\\r\\n            <p>{{lista.codigo}}</p>\\r\\n            <p>{{lista.descripcion}}</p>\\r\\n        </ion-card-content>\\r\\n    </ion-card-header>\\r\\n</ion-card>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsb3MvaW5wL2NvbXBvbmVudHMvaW5zcGVjY2lvbi1uby1wcm9ncmFtYWRhL2luc3BlY2Npb24tbm8tcHJvZ3JhbWFkYS5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\r\nimport { OfflineService } from '../../../com/services/offline.service';\r\nimport { ListaInspeccion } from '../../entities/lista-inspeccion';\r\n\r\n@Component({\r\n  selector: 'sm-inspeccionNoProgramada',\r\n  templateUrl: './inspeccion-no-programada.component.html',\r\n  styleUrls: ['./inspeccion-no-programada.component.scss']\r\n})\r\nexport class InspeccionNoProgramadaComponent implements OnInit {\r\n\r\n  @Output(\"onListaSelect\") onListaSelect = new EventEmitter<ListaInspeccion>();\r\n  listasInspeccion: ListaInspeccion[];\r\n\r\n  loading: boolean;\r\n  listasCargadas: boolean;\r\n\r\n  constructor(\r\n    private offlineService: OfflineService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.cargarListas();\r\n  }\r\n\r\n  cargarListas() {\r\n    this.loading = true;\r\n    this.listasCargadas = null;\r\n    this.offlineService.queryListasInspeccion()\r\n      .then(resp => {\r\n        this.listasInspeccion = resp['data'];\r\n        this.loading = false;\r\n        this.listasCargadas = true;\r\n      })\r\n      .catch(err => {\r\n        this.loading = false;\r\n        this.listasCargadas = false;\r\n      });\r\n  }\r\n\r\n  seleccionarLista(lista) {\r\n    this.onListaSelect.emit(lista);\r\n  }\r\n\r\n}\r\n","module.exports = \"<ion-item>\\r\\n    <ion-icon [name]=\\\"inspeccionesList.length > 0 ? 'alert' : 'checkmark-circle'\\\" [color]=\\\"inspeccionesList.length > 0 ? 'warning' : 'success'\\\"></ion-icon>\\r\\n    <ion-label>\\r\\n        <h4 *ngIf=\\\"inspeccionesList.length > 0\\\">Inspecciones iniciadas</h4>\\r\\n        <h4 *ngIf=\\\"inspeccionesList.length == 0\\\">Sin pendientes</h4>\\r\\n    </ion-label>\\r\\n</ion-item>\\r\\n\\r\\n<ion-list>\\r\\n    <ion-item *ngFor=\\\"let item of inspeccionesList; let idx = index;\\\" button>\\r\\n        <ion-label (click)=\\\"seleccionar(item)\\\">\\r\\n            <h4>{{item.fechaRealizada | date:'yyyy-MM-dd HH:mm'}}</h4>\\r\\n            <p>{{item.listaInspeccion.codigo}} - {{item.listaInspeccion.nombre}}</p>\\r\\n        </ion-label>\\r\\n        <ion-button (click)=\\\"elimianrInsp(item, idx)\\\" slot=\\\"end\\\" fill=\\\"clear\\\">\\r\\n            <ion-icon name=\\\"close\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n    </ion-item>\\r\\n</ion-list>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsb3MvaW5wL2NvbXBvbmVudHMvaW5zcGVjY2lvbi1wZW5kaWVudGUvaW5zcGVjY2lvbi1wZW5kaWVudGUuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\r\nimport { ListaInspeccion } from '../../entities/lista-inspeccion';\r\nimport { ElementoInspeccion } from '../../entities/elemento-inspeccion';\r\nimport { PopoverController, NavParams, AlertController } from '@ionic/angular';\r\nimport { Inspeccion } from '../../entities/inspeccion';\r\nimport { StorageService } from '../../../com/services/storage.service';\r\n\r\n\r\n@Component({\r\n  selector: 'sm-inspeccionPendiente',\r\n  templateUrl: './inspeccion-pendiente.component.html',\r\n  styleUrls: ['./inspeccion-pendiente.component.scss']\r\n})\r\nexport class InspeccionPendienteComponent implements OnInit {\r\n\r\n  inspeccionesList: Inspeccion[];\r\n  contador: number = 0;\r\n  datosGene: string;\r\n\r\n  constructor(\r\n    public alertController: AlertController,\r\n    private storageService: StorageService,\r\n    private navParams: NavParams,\r\n    private popoverController: PopoverController\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.inspeccionesList = <Inspeccion[]>(this.navParams.data.inspecciones);\r\n  }\r\n\r\n  seleccionar(insp: Inspeccion) {\r\n    this.popoverController.dismiss(insp);\r\n  }\r\n\r\n  async elimianrInsp(insp: Inspeccion, idx: number) {\r\n    const alert = await this.alertController.create({\r\n      header: 'Confirmar acción',\r\n      message: 'Esto borrará permanentemente la inspección que habia inciado ¿Confirma esta acción?',\r\n      buttons: [{\r\n        text: 'Si',\r\n        handler: () => {\r\n          this.storageService.borrarInspeccionPendiente(insp);\r\n          this.inspeccionesList.splice(idx, 1);\r\n          if (this.inspeccionesList.length == 0)\r\n            this.popoverController.dismiss();\r\n        }\r\n      },\r\n      {\r\n        text: 'No',\r\n        role: 'cancel'\r\n      }]\r\n    });\r\n    await alert.present();\r\n\r\n\r\n  }\r\n}\r\n","module.exports = \"<ion-card *ngFor=\\\"let inp of inspList; let i = index\\\">\\r\\n  <ion-item>\\r\\n\\r\\n    <ion-button *ngIf=\\\"inp['sync'] == null || inp['sync'] == false\\\" fill=\\\"outline\\\" (click)=\\\"sincronizar(inp, i)\\\">\\r\\n      {{inp.fechaRealizada | date:'dd/MM/yyyy HH:mm'}}\\r\\n    </ion-button>\\r\\n\\r\\n    <ion-spinner *ngIf=\\\"inp['sync'] == true\\\" class=\\\"main-spinner\\\" name=\\\"dots\\\" color=\\\"primary\\\"></ion-spinner>\\r\\n\\r\\n    <ion-button *ngIf=\\\"inp['sync'] == null || inp['sync'] == false\\\" fill=\\\"clear\\\" slot=\\\"end\\\" (click)=\\\"presentAlertConfirm(inp, i)\\\"\\r\\n      color=\\\"medium\\\">\\r\\n      <ion-icon name=\\\"close\\\"></ion-icon>\\r\\n    </ion-button>\\r\\n\\r\\n  </ion-item>\\r\\n  <ion-card-header>\\r\\n    <ion-label *ngIf=\\\"inp.programacion\\\">{{inp.programacion.listaInspeccion.nombre}}</ion-label>\\r\\n    <ion-label *ngIf=\\\"inp.listaInspeccion\\\">{{inp.listaInspeccion.nombre}}</ion-label>\\r\\n    <ion-card-subtitle>\\r\\n      <ion-label *ngIf=\\\"inp.programacion\\\">{{inp.programacion.area.nombre}}</ion-label>\\r\\n      <ion-label *ngIf=\\\"inp.area\\\">{{inp.area.nombre}}</ion-label>\\r\\n    </ion-card-subtitle>\\r\\n    <ion-card-subtitle *ngIf=\\\"inp.programacion\\\"> {{inp.programacion.fecha | date:'dd/MM/yyyy'}} </ion-card-subtitle>\\r\\n    <ion-card-subtitle *ngIf=\\\"!inp.programacion\\\"> No programada </ion-card-subtitle>\\r\\n  </ion-card-header>\\r\\n</ion-card>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsb3MvaW5wL2NvbXBvbmVudHMvaW5zcGVjY2lvbmVzLXN5bmMvaW5zcGVjY2lvbmVzLXN5bmMuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\r\n\r\nimport { Inspeccion } from '../../entities/inspeccion';\r\nimport { Util } from '../../../com/utils/util';\r\nimport { InspeccionService } from '../../services/inspeccion.service';\r\nimport { MensajeUsuarioService } from '../../../com/services/mensaje-usuario.service';\r\nimport { DirectorioService } from '../../../ado/services/directorio.service';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { StorageService } from '../../../com/services/storage.service';\r\n\r\n@Component({\r\n  selector: 'sm-inspeccionesSync',\r\n  templateUrl: './inspecciones-sync.component.html',\r\n  styleUrls: ['./inspecciones-sync.component.scss']\r\n})\r\nexport class InspeccionesSyncComponent implements OnInit {\r\n\r\n  @Input('inspecciones') inspList: Inspeccion[];\r\n  @Output('onEvent') onEvent = new EventEmitter<any>();\r\n  // @Output('onLoadEvent') onLoadEvent = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    private storageService: StorageService,\r\n    private inspeccionService: InspeccionService,\r\n    private msgService: MensajeUsuarioService,\r\n    private dirService: DirectorioService,\r\n    public alertController: AlertController\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.storageService.getInspecciones()\r\n      .then(resp => {\r\n        if (resp != null) {\r\n          this.onEvent.emit({ type: 'onLoad', count: resp.count });\r\n          this.inspList = resp['data'];\r\n        } else {\r\n          this.onEvent.emit({ type: 'onLoad', count: 0 });\r\n        }\r\n      });\r\n  }\r\n\r\n  adicionarInspeccion(inspeccion: Inspeccion) {\r\n    if (this.inspList == null)\r\n      this.inspList = [];\r\n    this.inspList.push(inspeccion);\r\n    this.inspList = this.inspList.slice();\r\n  }\r\n\r\n  borrarInspeccion(insp: Inspeccion, indice: number, emitEvent?: boolean) {\r\n    return this.storageService.borrarInspeccion(insp)\r\n      .then(() => {\r\n        this.inspList.splice(indice, 1);\r\n        this.inspList = this.inspList.slice();\r\n        if (emitEvent)\r\n          this.onEvent.emit({ type: 'onLocalRemove', count: this.inspList.length, inspeccion: insp });\r\n      })\r\n  }\r\n\r\n  async presentAlertConfirm(inp: Inspeccion, index: number) {\r\n    const alert = await this.alertController.create({\r\n      header: '¿Eliminar inspección?',\r\n      message: 'Esto borrará de su entorno local la inspección y no podrá sincronizarla. ¿Confirma esta acción?',\r\n      buttons: [{\r\n        text: 'Si',\r\n        handler: () => {\r\n          this.borrarInspeccion(inp, index, true);\r\n          this.msgService.showMessage({ tipoMensaje: 'info', mensaje: 'Inspección eliminada de entorno local', detalle: '' });\r\n        }\r\n      }, {\r\n        text: 'No',\r\n        role: 'cancel',\r\n        cssClass: 'No'\r\n      }]\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  sincronizar(insp: Inspeccion, indice: number) {\r\n    insp['sync'] = true;\r\n    this.inspeccionService.create(insp)\r\n      .then(resp => {\r\n        for (let i = 0; i < insp.calificacionList.length; i++) {\r\n          let calf = (<Inspeccion>resp).calificacionList[i];\r\n          let imgsUrls = insp.calificacionList[i]['img_key'];\r\n          if (imgsUrls != null) {\r\n            let j = 0;\r\n            imgsUrls.forEach(url => {\r\n              // let url = localStorage.getItem(key);\r\n              if (url != null) {\r\n                Util.dataURLtoFile(url, 'img_' + i + j + '_inp_calf_' + calf.id + '.jpeg').then(\r\n                  file => this.dirService.upload(file, null, 'INP', calf.id).then(imgResp => localStorage.removeItem(url))\r\n                );\r\n              }\r\n              j += 1;\r\n            });\r\n          }\r\n        }\r\n\r\n        console.log(\"Sincronizando insp...\");\r\n        this.borrarInspeccion(insp, indice)\r\n          .then(() => {\r\n            insp['sync'] = false;\r\n            this.msgService.showMessage({\r\n              tipoMensaje: 'success',\r\n              mensaje: 'Inspección sincronizada',\r\n              detalle: 'La inspección ha sido sincronizada correctamente'\r\n            });\r\n            this.onEvent.emit({ type: 'onSync', inspeccion: resp, count: this.inspList.length });\r\n          });\r\n      })\r\n      .catch(err => {\r\n        insp['sync'] = false;\r\n      });\r\n  }\r\n\r\n}\r\n","module.exports = \"<ion-list>\\r\\n    <ion-item *ngFor=\\\"let item of items\\\" button (click)=\\\"seleccionar(item.indice)\\\">\\r\\n        <ion-icon slot=\\\"start\\\" *ngIf=\\\"item.calificable\\\" name=\\\"checkmark-circle\\\" [color]=\\\"item.checked ? 'primary':'light'\\\"></ion-icon>\\r\\n        <ion-label>{{item.label}}</ion-label>\\r\\n    </ion-item>\\r\\n</ion-list>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsb3MvaW5wL2NvbXBvbmVudHMvbWVudS1saXN0YS9tZW51LWxpc3RhLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\r\nimport { ListaInspeccion } from '../../entities/lista-inspeccion';\r\nimport { ElementoInspeccion } from '../../entities/elemento-inspeccion';\r\nimport { PopoverController, NavParams } from '@ionic/angular';\r\n\r\n\r\n@Component({\r\n  selector: 'sm-menuLista',\r\n  templateUrl: './menu-lista.component.html',\r\n  styleUrls: ['./menu-lista.component.scss']\r\n})\r\nexport class MenuListaComponent implements OnInit {\r\n\r\n  items: any;\r\n  contador: number = 0;\r\n  datosGene: string;\r\n\r\n  constructor(\r\n    private navParams: NavParams,\r\n    private popoverController: PopoverController\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    let lista = <ListaInspeccion>(this.navParams.data.listaInspeccion);\r\n    this.items = [{\r\n      label: lista.formulario.nombre,\r\n      calificable: false,\r\n      checked: false,\r\n      indice: -1\r\n    }];\r\n    this.generarMenu(this.items, lista.elementoInspeccionList);\r\n  }\r\n\r\n  generarMenu(list: any[], elementos: ElementoInspeccion[]) {\r\n    elementos.forEach(el => {\r\n      let calificable = el.elementoInspeccionList == null || el.elementoInspeccionList.length == 0;\r\n      list.push({\r\n        label: el.codigo + ' ' + el.nombre,\r\n        calificable: calificable,\r\n        checked: el.calificacion != null && el.calificacion.opcionCalificacion != null,\r\n        indice: (calificable ? this.contador : null)\r\n      });\r\n      if (calificable)\r\n        this.contador += 1;\r\n      if (el.elementoInspeccionList != null && el.elementoInspeccionList.length > 0) {\r\n        this.generarMenu(list, el.elementoInspeccionList);\r\n      }\r\n    });\r\n  }\r\n\r\n  seleccionar(indice: number) {\r\n    if (indice != null)\r\n      this.popoverController.dismiss(indice);\r\n  }\r\n\r\n}\r\n","module.exports = \"<ion-card *ngIf=\\\"elementoActual\\\">\\r\\n  <ion-item *ngFor=\\\"let elem of elementoParents\\\">\\r\\n    <p>{{elem}}</p>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"stacked\\\">Calificación</ion-label>\\r\\n    <ion-select okText=\\\"Aceptar\\\" cancelText=\\\"Cancelar\\\" compareWith=\\\"id\\\" [(ngModel)]=\\\"elementoActual.calificacion.opcionCalificacion\\\"\\r\\n      (ionChange)=\\\"emitirCambioCalificacion($event)\\\">\\r\\n      <ion-select-option *ngFor=\\\"let opc of opcionCalificacionList\\\" [value]=\\\"opc\\\">\\r\\n        {{opc.nombre}} - {{opc.descripcion}}\\r\\n      </ion-select-option>\\r\\n    </ion-select>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"stacked\\\">Descripción del hallazgo</ion-label>\\r\\n    <ion-textarea [(ngModel)]=\\\"elementoActual.calificacion.recomendacion\\\" maxlength=\\\"510\\\"></ion-textarea>\\r\\n  </ion-item>\\r\\n  <ion-button color=\\\"primary\\\" fill=\\\"outline\\\" expand=\\\"block\\\" (click)=\\\"getPicture()\\\">\\r\\n    <ion-icon slot=\\\"icon-only\\\" name=\\\"camera\\\"></ion-icon>\\r\\n  </ion-button>\\r\\n  <ion-item>\\r\\n    <!-- <img [src]=\\\"image\\\" *ngIf=\\\"image\\\" /> -->\\r\\n    <ion-slides pager=\\\"true\\\" #ionSlides>\\r\\n      <ion-slide *ngFor=\\\"let img of imagenes;let i = index\\\">\\r\\n        <div>\\r\\n          <div class=\\\"img-toolbar\\\">\\r\\n            <ion-button slot=\\\"end\\\" fill=\\\"clear\\\" color=\\\"medium\\\" (click)=\\\"presentRemoveImg(i)\\\">\\r\\n              <ion-icon name=\\\"close\\\"></ion-icon>\\r\\n            </ion-button>\\r\\n          </div>\\r\\n          <img [src]=\\\"img | safeBypass:'resourceUrl'\\\" />\\r\\n        </div>\\r\\n      </ion-slide>\\r\\n    </ion-slides>\\r\\n  </ion-item>\\r\\n  <ion-item *ngIf=\\\"usarTipoHallazgo\\\">\\r\\n    <ion-label position=\\\"stacked\\\">Tipo hallazgo</ion-label>\\r\\n    <ion-select okText=\\\"Aceptar\\\" cancelText=\\\"Cancelar\\\" [(ngModel)]=\\\"elementoActual.calificacion.tipoHallazgo\\\">\\r\\n      <ion-select-option *ngFor=\\\"let th of elementoActual?.tipoHallazgoList\\\" [value]=\\\"th\\\">{{th.nombre}}\\r\\n      </ion-select-option>\\r\\n    </ion-select>\\r\\n  </ion-item>\\r\\n  <ion-item *ngIf=\\\"usarNivelRiesgo\\\">\\r\\n    <ion-label position=\\\"stacked\\\">Nivel de riesgo</ion-label>\\r\\n    <ion-select okText=\\\"Aceptar\\\" cancelText=\\\"Cancelar\\\" [(ngModel)]=\\\"elementoActual.calificacion.nivelRiesgo\\\">\\r\\n      <ion-select-option *ngFor=\\\"let nr of sistNivelRiesgo?.nivelRiesgoList\\\" [value]=\\\"nr\\\">{{nr.nombre}} - {{nr.descripcion}}\\r\\n      </ion-select-option>\\r\\n    </ion-select>\\r\\n  </ion-item>\\r\\n</ion-card>\\r\\n\\r\\n\\r\\n<!-- <ion-grid *ngIf=\\\"elementoActual\\\">\\r\\n  <ion-row>\\r\\n    <ion-col size-xs=\\\"12\\\" size-sm=\\\"12\\\" size-md=\\\"12\\\" size-lg=\\\"12\\\" size-xl=\\\"12\\\">\\r\\n      <p *ngFor=\\\"let elem of elementoParents\\\">{{elem}}</p>\\r\\n    </ion-col>\\r\\n    <ion-col size-xs=\\\"12\\\" size-sm=\\\"12\\\" size-md=\\\"12\\\" size-lg=\\\"12\\\" size-xl=\\\"12\\\">\\r\\n      <ion-button color=\\\"primary\\\" fill=\\\"outline\\\" expand=\\\"block\\\" (click)=\\\"getPicture()\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"camera\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n      <img [src]=\\\"image\\\" *ngIf=\\\"image\\\" />\\r\\n    </ion-col>\\r\\n    <ion-col size-xs=\\\"12\\\" size-sm=\\\"12\\\" size-md=\\\"12\\\" size-lg=\\\"12\\\" size-xl=\\\"12\\\">\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"stacked\\\">Calificación</ion-label>\\r\\n        <ion-select okText=\\\"Aceptar\\\" cancelText=\\\"Cancelar\\\" [(ngModel)]=\\\"elementoActual.calificacion.opcionCalificacion\\\">\\r\\n          <ion-select-option *ngFor=\\\"let opc of opcionCalificacionList\\\" [value]=\\\"opc\\\">{{opc.nombre}} -\\r\\n            {{opc.descripcion}}</ion-select-option>\\r\\n        </ion-select>\\r\\n      </ion-item>\\r\\n    </ion-col>\\r\\n    <ion-col size-xs=\\\"12\\\" size-sm=\\\"12\\\" size-md=\\\"12\\\" size-lg=\\\"12\\\" size-xl=\\\"12\\\" *ngIf=\\\"usarTipoHallazgo\\\">\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"stacked\\\">Tipo hallazgo</ion-label>\\r\\n        <ion-select okText=\\\"Aceptar\\\" cancelText=\\\"Cancelar\\\" [(ngModel)]=\\\"elementoActual.calificacion.tipoHallazgo\\\">\\r\\n          <ion-select-option *ngFor=\\\"let th of elementoActual?.tipoHallazgoList\\\" [value]=\\\"th\\\">{{th.nombre}}\\r\\n          </ion-select-option>\\r\\n        </ion-select>\\r\\n      </ion-item>\\r\\n    </ion-col>\\r\\n    <ion-col size-xs=\\\"12\\\" size-sm=\\\"12\\\" size-md=\\\"12\\\" size-lg=\\\"12\\\" size-xl=\\\"12\\\" *ngIf=\\\"usarNivelRiesgo\\\">\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"stacked\\\">Nivel de riesgo</ion-label>\\r\\n        <ion-select okText=\\\"Aceptar\\\" cancelText=\\\"Cancelar\\\" [(ngModel)]=\\\"elementoActual.calificacion.nivelRiesgo\\\">\\r\\n          <ion-select-option *ngFor=\\\"let nr of sistNivelRiesgo?.nivelRiesgoList\\\" [value]=\\\"nr\\\">{{nr.nombre}} -\\r\\n            {{nr.descripcion}}</ion-select-option>\\r\\n        </ion-select>\\r\\n      </ion-item>\\r\\n    </ion-col>\\r\\n    <ion-col size-xs=\\\"12\\\" size-sm=\\\"12\\\" size-md=\\\"12\\\" size-lg=\\\"12\\\" size-xl=\\\"12\\\">\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"stacked\\\">Recomendación</ion-label>\\r\\n        <ion-textarea [(ngModel)]=\\\"elementoActual.calificacion.recomendacion\\\"></ion-textarea>\\r\\n      </ion-item>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n\\r\\n</ion-grid> -->\"","module.exports = \".img-toolbar {\\n  height: 50px; }\\n\\n.img-toolbar ion-button {\\n  float: right; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxvcy9pbnAvY29tcG9uZW50cy9wcmVndW50YS1pbnNwZWNjaW9uL0M6XFxVc2Vyc1xcREVMTFxcRG93bmxvYWRzXFxvcmlnaW5hbFxcYXBwbGVvbmFyZG9cXGFwcC9zcmNcXGFwcFxcbW9kdWxvc1xcaW5wXFxjb21wb25lbnRzXFxwcmVndW50YS1pbnNwZWNjaW9uXFxwcmVndW50YS1pbnNwZWNjaW9uLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksWUFBWSxFQUFBOztBQUdoQjtFQUNJLFlBQVksRUFBQSIsImZpbGUiOiJzcmMvYXBwL21vZHVsb3MvaW5wL2NvbXBvbmVudHMvcHJlZ3VudGEtaW5zcGVjY2lvbi9wcmVndW50YS1pbnNwZWNjaW9uLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmltZy10b29sYmFye1xyXG4gICAgaGVpZ2h0OiA1MHB4O1xyXG59XHJcblxyXG4uaW1nLXRvb2xiYXIgaW9uLWJ1dHRvbntcclxuICAgIGZsb2F0OiByaWdodDtcclxufSJdfQ== */\"","import { Component, OnInit, Input, SecurityContext, ViewChild, Output, EventEmitter } from '@angular/core';\r\nimport { ElementoInspeccion } from '../../entities/elemento-inspeccion';\r\nimport { SistemaNivelRiesgo } from '../../../com/entities/sistema-nivel-riesgo';\r\n\r\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\r\nimport { OpcionCalificacion } from '../../entities/opcion-calificacion';\r\nimport { OfflineService } from '../../../com/services/offline.service';\r\nimport { Calificacion } from '../../entities/calificacion';\r\nimport { TipoHallazgo } from '../../entities/tipo-hallazgo';\r\nimport { AlertController, IonSlides } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'sm-preguntaInspeccion',\r\n  templateUrl: './pregunta-inspeccion.component.html',\r\n  styleUrls: ['./pregunta-inspeccion.component.scss'],\r\n  providers: [Camera]\r\n})\r\nexport class PreguntaInspeccionComponent implements OnInit {\r\n\r\n  @Output(\"onCalificacionChange\") onCalificacionChange = new EventEmitter();\r\n  @ViewChild(\"ionSlides\") ionSlides: IonSlides;\r\n\r\n  private _elementoActual: ElementoInspeccion;\r\n  @Input('usarTipoHallazgo') usarTipoHallazgo: boolean;\r\n  @Input('usarNivelRiesgo') usarNivelRiesgo: boolean;\r\n  @Input('opcionCalificacionList') opcionCalificacionList: OpcionCalificacion[];\r\n  sistNivelRiesgo: SistemaNivelRiesgo;\r\n  // image: any;\r\n  imagenes: any[] = [];\r\n  elementoParents: string[];\r\n  numMaxFotos: number;\r\n\r\n\r\n\r\n  options: CameraOptions = {\r\n    quality: 75,\r\n    destinationType: this.camera.DestinationType.FILE_URI,\r\n    encodingType: this.camera.EncodingType.JPEG,\r\n    correctOrientation: true,\r\n    mediaType: this.camera.MediaType.PICTURE,\r\n    targetWidth: 960,\r\n    targetHeight: 960,\r\n  }\r\n\r\n\r\n  constructor(\r\n    public alertController: AlertController,\r\n    private offlineService: OfflineService,\r\n    private camera: Camera,\r\n  ) {\r\n    this.numMaxFotos = this.offlineService.sessionService.getConfigParam('NUM_MAX_FOTO_INP');\r\n  }\r\n\r\n  // getPicture() {\r\n  //   let options: CameraOptions = {\r\n  //     quality: 75,\r\n  //     destinationType: this.camera.DestinationType.FILE_URI,\r\n  //     encodingType: this.camera.EncodingType.JPEG,\r\n  //     correctOrientation: true,\r\n  //     mediaType: this.camera.MediaType.PICTURE,\r\n  //     targetWidth: 960,\r\n  //     targetHeight: 960,\r\n  //   }\r\n  //   this.camera.getPicture(options)\r\n  //     .then(imageData => {\r\n  //       let imgKey = this.elementoActual.calificacion['img_key'];\r\n  //       if (imgKey == null) {\r\n  //         imgKey = new Date().toISOString();\r\n  //       } else {\r\n  //         localStorage.removeItem(imgKey);\r\n  //       }\r\n  //       this.elementoActual.calificacion['img_key'] = imgKey;\r\n  //       let ionImageUrl = (<any>window).Ionic.WebView.convertFileSrc(imageData);\r\n  //       this.image = this.domSanitizer.bypassSecurityTrustResourceUrl(ionImageUrl);\r\n  //       localStorage.setItem(imgKey, ionImageUrl);\r\n  //     })\r\n  //     .catch(error => console.error(error));\r\n  // }\r\n\r\n  getPicture() {\r\n    if (this.imagenes != null && this.imagenes.length >= this.numMaxFotos) {\r\n      this.presentAlert(\"Número máximo de fotografías alcanzado\", \"No es posible adjuntar mas de \" + this.numMaxFotos + \" fotografía(s) por hallazgo\");\r\n      return;\r\n    }\r\n    this.camera.getPicture(this.options)\r\n      .then(imageData => {\r\n        let imgsUrls = this.elementoActual.calificacion['img_key'];\r\n        if (imgsUrls == null)\r\n          imgsUrls = [];\r\n\r\n        if (this.imagenes == null)\r\n          this.imagenes = [];\r\n\r\n        let imgUrl = (<any>window).Ionic.WebView.convertFileSrc(imageData);\r\n        imgsUrls.push(imgUrl);\r\n\r\n        // let imgKey = new Date().toISOString();\r\n        // imgsKeys.push(imgKey);\r\n        // localStorage.setItem(imgKey, imgUrl);\r\n\r\n        this.elementoActual.calificacion['img_key'] = imgsUrls;\r\n\r\n        this.imagenes.push(imgUrl);\r\n        this.imagenes = this.imagenes.slice();\r\n      }).catch(error => {\r\n        console.error(error);\r\n      });\r\n  }\r\n\r\n  ngOnInit() {\r\n    // -- Consulta niveles de riesgo\r\n    this.offlineService.querySistemaNivelRiesgo().then(\r\n      resp => this.sistNivelRiesgo = resp['data'][0]\r\n    );\r\n  }\r\n\r\n  @Input('elementoInspeccion') set elementoActual(value: ElementoInspeccion) {\r\n    console.log(\"Setting elemento...\");\r\n    this._elementoActual = value;\r\n    this.imagenes = null;\r\n    if (value != null && value.calificacion != null) {\r\n      this._elementoActual.calificacion = value.calificacion;\r\n      let imgsUrls = value.calificacion['img_key'];\r\n      if (imgsUrls != null) {\r\n        this.imagenes = [];\r\n        imgsUrls.forEach(imgurl => this.imagenes.push(imgurl));\r\n      }\r\n    } else {\r\n      this._elementoActual.calificacion = new Calificacion();\r\n      this._elementoActual.calificacion.elementoInspeccion = new ElementoInspeccion();\r\n      this._elementoActual.calificacion.elementoInspeccion.id = this._elementoActual.id;\r\n      this._elementoActual.calificacion.tipoHallazgo = new TipoHallazgo();\r\n    }\r\n    this.elementoParents = [];\r\n    this.fillElementosParent(this._elementoActual, this.elementoParents);\r\n  }\r\n\r\n  fillElementosParent(elem: ElementoInspeccion, elementos: string[]) {\r\n    if (elem.elementoInspeccionPadre != null) {\r\n      this.fillElementosParent(elem.elementoInspeccionPadre, elementos);\r\n    }\r\n    elementos.push((elem.codigo == null ? '' : elem.codigo + ' ') + elem.nombre);\r\n  }\r\n\r\n  get elementoActual() {\r\n    return this._elementoActual;\r\n  }\r\n\r\n  removerImg(index: number) {\r\n    let imgsUrls = this.elementoActual.calificacion['img_key'];\r\n    // let imgurl = imgsUrls[index];\r\n\r\n    let imgsAux = this.imagenes.slice();\r\n    imgsAux.splice(index, 1);\r\n    this.imagenes = null;\r\n\r\n    imgsUrls.splice(index, 1);\r\n    this.elementoActual.calificacion['img_key'] = imgsUrls;\r\n\r\n    setTimeout(() => {\r\n      this.imagenes = imgsAux;\r\n    }, 50);\r\n\r\n    // localStorage.removeItem(imgurl);\r\n  }\r\n\r\n  async presentRemoveImg(index: number) {\r\n    const alert = await this.alertController.create({\r\n      header: '¿Desea remover la fotografía?',\r\n      message: 'La fotografía será eliminada. ¿Confirma esta acción?',\r\n      buttons: [{\r\n        text: 'Si',\r\n        handler: () => this.removerImg(index)\r\n      }, {\r\n        text: 'No',\r\n        role: 'cancel',\r\n        cssClass: 'No'\r\n      }]\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  async presentAlert(header: string, msg: string) {\r\n    const alert = await this.alertController.create({\r\n      header: header,\r\n      message: msg,\r\n      buttons: [{ text: 'Aceptar' }]\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  emitirCambioCalificacion(event) {\r\n    this.onCalificacionChange.emit(event.detail.value);\r\n  }\r\n}\r\n","module.exports = \"<div *ngIf=\\\"loading == true\\\">\\r\\n  <ion-spinner class=\\\"main-spinner\\\" name=\\\"dots\\\" color=\\\"primary\\\"></ion-spinner>\\r\\n</div>\\r\\n<div *ngIf=\\\"progCargada == false\\\">\\r\\n  <p style=\\\"color:#888;padding:25px\\\">\\r\\n    No fue posible cargar la programación de inspecciones.\\r\\n    <a *ngIf=\\\"progCargada == false\\\" (click)=\\\"cargarProgramacion()\\\">Reintentar</a>\\r\\n  </p>\\r\\n</div>\\r\\n\\r\\n<ion-card *ngFor=\\\"let prog of programacionList\\\">\\r\\n  <ion-item>\\r\\n    <ion-label>{{prog.area.nombre}} </ion-label>\\r\\n    <ion-button [color]=\\\"prog.numeroRealizadas == prog.numeroInspecciones ? 'secondary':'primary'\\\" [disabled]=\\\"prog.numeroRealizadas == prog.numeroInspecciones\\\"\\r\\n      fill=\\\"outline\\\" slot=\\\"end\\\" (click)=\\\"onProgSelect(prog)\\\" *sTienePermiso=\\\"['SEC_GET_SISTNR', 'INP_GET_LISTINP']\\\">\\r\\n      {{prog.numeroRealizadas == prog.numeroInspecciones ? 'Finalizado':'Realizar'}}\\r\\n    </ion-button>\\r\\n  </ion-item>\\r\\n  <ion-card-header>\\r\\n    <ion-card-title>{{prog.numeroRealizadas}}/{{prog.numeroInspecciones}} </ion-card-title>\\r\\n    <ion-card-subtitle>{{prog.listaInspeccion.nombre}} <br/> {{prog.fecha | date:'dd/MM/yyyy'}}\\r\\n    </ion-card-subtitle>\\r\\n  </ion-card-header>\\r\\n  <ion-card-content *ngIf=\\\"prog.offlineDone > 0\\\">\\r\\n    <p>\\r\\n      Pdte sincronizar:\\r\\n      <ion-badge color=\\\"warning\\\">{{prog.offlineDone}}</ion-badge>\\r\\n    </p>\\r\\n  </ion-card-content>\\r\\n</ion-card>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsb3MvaW5wL2NvbXBvbmVudHMvcHJvZ3JhbWFjaW9uLWluc3BlY2Npb25lcy9wcm9ncmFtYWNpb24taW5zcGVjY2lvbmVzLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\r\n\r\nimport { Programacion } from '../../entities/programacion';\r\nimport { FilterQuery } from '../../../com/entities/filter-query'\r\nimport { OfflineService } from '../../../com/services/offline.service'\r\nimport { StorageService } from '../../../com/services/storage.service';\r\n\r\n@Component({\r\n  selector: 'sm-programacionInspecciones',\r\n  templateUrl: './programacion-inspecciones.component.html',\r\n  styleUrls: ['./programacion-inspecciones.component.scss']\r\n})\r\nexport class ProgramacionInspeccionesComponent implements OnInit {\r\n\r\n  @Output(\"onProgramacionSelect\") onProgramacionSelect = new EventEmitter<Programacion>();\r\n  programacionList: Programacion[];\r\n\r\n  loading: boolean;\r\n  progCargada: boolean;\r\n\r\n  constructor(\r\n    private storageService: StorageService,\r\n    private offlineService: OfflineService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.cargarProgramacion();\r\n  }\r\n\r\n  cargarProgramacion() {\r\n    this.loading = true;\r\n    this.progCargada = null;\r\n    this.offlineService.queryProgramacionList()\r\n      .then(resp => {\r\n        this.programacionList = [];\r\n        (<any[]>resp['data']).forEach(dto => {\r\n          this.programacionList.push(FilterQuery.dtoToObject(dto));\r\n        });\r\n        this.loading = false;\r\n        this.progCargada = true;\r\n      })\r\n      .catch(err => {\r\n        this.loading = false;\r\n        this.progCargada = false;\r\n      });\r\n  }\r\n\r\n  actualizarProgMetadata(id: string, aumentarRealizadas: boolean, aumentarOffline: boolean) {\r\n    let prog: Programacion;\r\n    for (let i = 0; i < this.programacionList.length; i++) {\r\n      if (id == this.programacionList[i].id) {\r\n        prog = this.programacionList[i];\r\n        break;\r\n      }\r\n    }\r\n    if (prog['offlineDone'] == null)\r\n      prog['offlineDone'] = 0;\r\n    prog.numeroRealizadas += aumentarRealizadas == null ? 0 : (aumentarRealizadas ? 1 : -1);\r\n    prog['offlineDone'] += aumentarOffline == null ? 0 : (aumentarOffline ? 1 : -1);\r\n    this.storageService.updateProgramacion(prog);\r\n  }\r\n\r\n  onProgSelect(prog: Programacion) {\r\n    this.onProgramacionSelect.emit(prog);\r\n  }\r\n\r\n}\r\n","\r\n\r\nimport { ElementoInspeccion } from './elemento-inspeccion'\r\nimport { OpcionCalificacion } from './opcion-calificacion'\r\nimport { NivelRiesgo } from '../../com/entities/nivel-riesgo';\r\nimport { Documento } from '../../ado/entities/documento'\r\nimport { TipoHallazgo } from './tipo-hallazgo';\r\n\r\nexport class Calificacion {\r\n    id: string;\r\n    recomendacion: string;\r\n    elementoInspeccion: ElementoInspeccion;\r\n    opcionCalificacion: OpcionCalificacion;\r\n    nivelRiesgo: NivelRiesgo;\r\n    tipoHallazgo:TipoHallazgo;\r\n    documentosList: Documento[];\r\n}","\r\nimport { Calificacion } from './calificacion'\r\nimport { TipoHallazgo } from './tipo-hallazgo'\r\n\r\nexport class ElementoInspeccion {\r\n    id: string;\r\n    codigo: string;\r\n    nombre: string;\r\n    descripcion: string;\r\n    elementoInspeccionPadre: ElementoInspeccion;\r\n    elementoInspeccionList: ElementoInspeccion[] = [];\r\n    calificable: boolean;\r\n    numero: number;\r\n    calificacion: Calificacion;\r\n    tipoHallazgoList: TipoHallazgo[];\r\n}","\r\nimport { Calificacion } from './calificacion'\r\nimport { Programacion } from './programacion'\r\nimport { Usuario } from '../../emp/entities/usuario';\r\nimport { RespuestaCampo } from '../../com/entities/respuesta-campo';\r\nimport { Empresa } from '../../emp/entities/empresa';\r\nimport { ListaInspeccion } from './lista-inspeccion';\r\nimport { Area } from '../../emp/entities/area';\r\n\r\nexport class Inspeccion {\r\n  id: string;\r\n  fechaRealizada: Date;\r\n  fechaModificacion: Date;\r\n  observacion: string;\r\n  lugar: string;\r\n  equipo: string;\r\n  marca: string;\r\n  modelo: string;\r\n  serial: string;\r\n  descripcion: string;\r\n  empresa: Empresa;\r\n  calificacionList: Calificacion[];\r\n  respuestasCampoList: RespuestaCampo[];\r\n  programacion: Programacion;\r\n  usuarioRegistra: Usuario;\r\n  usuarioModifica: Usuario;\r\n  listaInspeccion: ListaInspeccion;\r\n  area: Area;\r\n}\r\n","export class ListaInspeccionPK {\r\n    id: string;\r\n    version: number;\r\n}","\r\nimport { ListaInspeccionPK } from './lista-inspeccion-pk'\r\nimport { OpcionCalificacion } from './opcion-calificacion'\r\nimport { ElementoInspeccion } from './elemento-inspeccion'\r\nimport { Formulario } from '../../com/entities/formulario';\r\n\r\n\r\nexport class ListaInspeccion {\r\n  listaInspeccionPK: ListaInspeccionPK = new ListaInspeccionPK();\r\n  nombre: string;\r\n  codigo: string;\r\n  numeroPreguntas: number;\r\n  tipoLista: string;\r\n  descripcion: string;\r\n  elementoInspeccionList: ElementoInspeccion[];\r\n  opcionCalificacionList: OpcionCalificacion[] = [];\r\n  formulario: Formulario;\r\n  usarNivelRiesgo:boolean;\r\n  usarTipoHallazgo:boolean;\r\n}","\r\nexport class TipoHallazgo {\r\n    id: string;\r\n    nombre: string;\r\n    descripcion: number;\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ComunModule} from '../../../com/comun.module'\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { ListaInspeccionService } from '../../services/lista-inspeccion.service';\r\n\r\nimport { ElaboracionInspeccionPage } from './elaboracion-inspeccion.page';\r\nimport { ProgramacionInspeccionesComponent } from '../../components/programacion-inspecciones/programacion-inspecciones.component';\r\nimport { InspeccionFormComponent } from '../../components/inspeccion-form/inspeccion-form.component'\r\nimport { PreguntaInspeccionComponent } from '../../components/pregunta-inspeccion/pregunta-inspeccion.component'\r\nimport { InspeccionesSyncComponent } from '../../components/inspecciones-sync/inspecciones-sync.component'\r\nimport { InspeccionNoProgramadaComponent } from '../../components/inspeccion-no-programada/inspeccion-no-programada.component';\r\nimport { AreaSelectorModule } from '../../../com/components/area-selector/area-selector.component';\r\nimport { MenuListaComponent } from '../../components/menu-lista/menu-lista.component';\r\nimport { InspeccionPendienteComponent } from '../../components/inspeccion-pendiente/inspeccion-pendiente.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ElaboracionInspeccionPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ComunModule,\r\n    RouterModule.forChild(routes),\r\n    AreaSelectorModule\r\n  ],\r\n  exports:[ComunModule],\r\n  providers: [ListaInspeccionService],\r\n  entryComponents: [InspeccionFormComponent, MenuListaComponent, InspeccionPendienteComponent],\r\n  declarations: [\r\n    ElaboracionInspeccionPage, \r\n    ProgramacionInspeccionesComponent, \r\n    InspeccionFormComponent,\r\n    PreguntaInspeccionComponent,\r\n    InspeccionesSyncComponent,\r\n    InspeccionNoProgramadaComponent,\r\n    MenuListaComponent,\r\n    InspeccionPendienteComponent\r\n  ]\r\n})\r\nexport class ElaboracionInspeccionPageModule {\r\n\r\n}\r\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"navegar('/app/home')\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-back\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title (click)=\\\"cargarInspPendientes(true)\\\">\\r\\n      Elaboracion inspeccion\\r\\n      <ion-icon name=\\\"alert\\\"></ion-icon>\\r\\n    </ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-segment (ionChange)=\\\"segmentChanged($event)\\\" value=\\\"listas\\\">\\r\\n    <ion-segment-button value=\\\"listas\\\">\\r\\n      <ion-label>Listas</ion-label>\\r\\n    </ion-segment-button>\\r\\n    <ion-segment-button value=\\\"prog\\\">\\r\\n      <ion-label>Programación</ion-label>\\r\\n    </ion-segment-button>\\r\\n    <ion-segment-button value=\\\"insp\\\">\\r\\n      <ion-label>\\r\\n        Sincronizar\\r\\n        <ion-badge *ngIf=\\\"inspCount > 0\\\" color=\\\"warning\\\">{{inspCount}}</ion-badge>\\r\\n      </ion-label>\\r\\n    </ion-segment-button>\\r\\n  </ion-segment>\\r\\n\\r\\n  <sm-inspeccionNoProgramada [style.display]=\\\"segments['listas'] ? 'block':'none'\\\" (onListaSelect)=\\\"abrirInspeccion(null, $event, null)\\\"></sm-inspeccionNoProgramada>\\r\\n\\r\\n  <sm-programacionInspecciones [style.display]=\\\"segments['prog'] ? 'block':'none'\\\" (onProgramacionSelect)=\\\"abrirInspeccion($event, null, null)\\\"\\r\\n    #progInspComp></sm-programacionInspecciones>\\r\\n\\r\\n  <sm-inspeccionesSync [style.display]=\\\"segments['insp'] ? 'block':'none'\\\" (onEvent)=\\\"onEvent($event)\\\" #inspSyncComp></sm-inspeccionesSync>\\r\\n\\r\\n\\r\\n\\r\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsb3MvaW5wL3BhZ2VzL2VsYWJvcmFjaW9uLWluc3BlY2Npb24vZWxhYm9yYWNpb24taW5zcGVjY2lvbi5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { InspeccionFormComponent } from '../../components/inspeccion-form/inspeccion-form.component'\r\nimport { ModalController, PopoverController } from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\nimport { Programacion } from '../../entities/programacion';\r\nimport { Inspeccion } from '../../entities/inspeccion';\r\nimport { asyncLocalStorage } from '../../../com/utils/util';\r\nimport { InspeccionesSyncComponent } from '../../components/inspecciones-sync/inspecciones-sync.component';\r\nimport { ProgramacionInspeccionesComponent } from '../../components/programacion-inspecciones/programacion-inspecciones.component';\r\nimport { StorageService } from '../../../com/services/storage.service';\r\nimport { InspeccionPendienteComponent } from '../../components/inspeccion-pendiente/inspeccion-pendiente.component';\r\nimport { ListaInspeccion } from '../../entities/lista-inspeccion';\r\n\r\n@Component({\r\n  selector: 'sm-elaboracionInspeccion',\r\n  templateUrl: './elaboracion-inspeccion.page.html',\r\n  styleUrls: ['./elaboracion-inspeccion.page.scss'],\r\n})\r\nexport class ElaboracionInspeccionPage implements OnInit {\r\n\r\n  @ViewChild('inspSyncComp') inspSyncComp: InspeccionesSyncComponent;\r\n  @ViewChild('progInspComp') progInspComp: ProgramacionInspeccionesComponent;\r\n\r\n  segments = { 'listas': true, 'prog': false, 'insp': false };\r\n  inspCount = 0;\r\n\r\n  constructor(\r\n    public popoverController: PopoverController,\r\n    public storageService: StorageService,\r\n    public modalController: ModalController,\r\n    private router: Router,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.cargarInspPendientes();\r\n  }\r\n\r\n  cargarInspPendientes(desdeBoton?: boolean) {\r\n    this.storageService.getInspeccionesPendientes()\r\n      .then(resp => {\r\n        let inspPend = resp.data;\r\n        if (inspPend.length > 0 || desdeBoton == true) {\r\n          this.abrirInspPendientes(inspPend);\r\n        }\r\n      });\r\n  }\r\n\r\n  async abrirInspPendientes(inspecciones: Inspeccion[]) {\r\n    const popOver = await this.popoverController.create({\r\n      component: InspeccionPendienteComponent,\r\n      componentProps: { 'inspecciones': inspecciones }\r\n    });\r\n    popOver.onDidDismiss()\r\n      .then(resp => {\r\n        let insp: Inspeccion = resp.data;\r\n        if (insp) {\r\n          this.abrirInspeccion(null, null, insp);\r\n        }\r\n      });\r\n    return await popOver.present();\r\n  }\r\n\r\n\r\n  async abrirInspeccion(programacion: Programacion, listaInspeccion: ListaInspeccion, inspeccion: Inspeccion) {\r\n    const modal = await this.modalController.create({\r\n      component: InspeccionFormComponent,\r\n      componentProps: {\r\n        'programacion': programacion,\r\n        'listaInspeccion': listaInspeccion,\r\n        'inspeccion': inspeccion\r\n      },\r\n      cssClass: \"modal-fullscreen\"\r\n    });\r\n    modal.onDidDismiss()\r\n      .then(resp => {\r\n        this.onModalDismiss(resp['data'], programacion != null ? programacion : null);\r\n      });\r\n    return await modal.present();\r\n  }\r\n\r\n  onModalDismiss(inspeccion: Inspeccion, prog: Programacion) {\r\n    if (inspeccion != null && inspeccion.id == null) {\r\n      this.inspSyncComp.adicionarInspeccion(inspeccion);\r\n      this.inspCount += 1;\r\n      if (prog != null)\r\n        this.progInspComp.actualizarProgMetadata(prog.id, null, true);\r\n    } else if (inspeccion != null && prog != null) {\r\n      prog.numeroRealizadas += 1;\r\n    }\r\n  }\r\n\r\n  onEvent(event) {\r\n    switch (event.type) {\r\n      case 'onSync':\r\n        // si event.inspeccion.programacion  == null indica que es una programacion no programada\r\n        if (event.inspeccion.programacion != null)\r\n          this.progInspComp.actualizarProgMetadata(event.inspeccion.programacion.id, true, false);\r\n        break;\r\n      case 'onLocalRemove':\r\n        // si event.inspeccion.programacion  == null indica que es una programacion no programada\r\n        if (event.inspeccion.programacion != null)\r\n          this.progInspComp.actualizarProgMetadata(event.inspeccion.programacion.id, null, false);\r\n        break;\r\n    }\r\n    this.inspCount = event.count;\r\n  }\r\n\r\n  navegar(url) {\r\n    this.router.navigate([url])\r\n  }\r\n\r\n  segmentChanged(event) {\r\n    for (var seg in this.segments) {\r\n      this.segments[seg] = false;\r\n      if (event.detail.value == seg)\r\n        this.segments[seg] = true;\r\n\r\n    }\r\n  }\r\n\r\n  /* *********************** inspecciones no programadas ******************************** */\r\n\r\n\r\n}\r\n"],"sourceRoot":""}