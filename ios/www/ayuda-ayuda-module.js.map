{"version":3,"sources":["webpack:///./src/app/ayuda/ayuda.module.ts","webpack:///./src/app/ayuda/ayuda.page.html","webpack:///./src/app/ayuda/ayuda.page.scss","webpack:///./src/app/ayuda/ayuda.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAyC;AACM;AACF;AACA;AACE;AAEN;AACiB;AAkB1D;IAAA;IAA8B,CAAC;IAAlB,eAAe;QAhB3B,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,qEAAW;gBACX,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;gBACX,4DAAY,CAAC,QAAQ,CAAC;oBACpB;wBACE,IAAI,EAAE,EAAE;wBACR,SAAS,EAAE,qDAAS;qBACrB;iBACF,CAAC;aACH;YACD,OAAO,EAAC,CAAC,qEAAW,CAAC;YACrB,YAAY,EAAE,CAAC,qDAAS,CAAC;SAC1B,CAAC;OACW,eAAe,CAAG;IAAD,sBAAC;CAAA;AAAH;;;;;;;;;;;;ACzB5B,irBAAirB,qPAAqP,oLAAoL,gBAAgB,qBAAqB,YAAY,sBAAsB,iBAAiB,grBAAgrB,gBAAgB,oCAAoC,0BAA0B,mBAAmB,iDAAiD,WAAW,MAAM,SAAS,2HAA2H,gBAAgB,qCAAqC,WAAW,MAAM,SAAS,qD;;;;;;;;;;;ACAxtE,gCAAgC,gBAAgB,iBAAiB,EAAE,YAAY,oBAAoB,aAAa,cAAc,gBAAgB,iBAAiB,gCAAgC,EAAE,qBAAqB,kCAAkC,eAAe,8BAA8B,qBAAqB,oBAAoB,wBAAwB,qBAAqB,EAAE,+CAA+C,2nC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAlY;AACD;AAC8B;AACrB;AACqB;AAEpB;AACoB;AACZ;AAC6B;AACrB;AACM;AAQzE;IAUE,mBACS,cAA8B,EAC9B,WAAwB,EACxB,UAAiC,EACjC,IAAgB,EAChB,UAAsB,EACtB,iBAAoC,EACpC,cAA6B,EAC7B,MAAc,EACd,aAA4B,EAC5B,MAAc;QAVvB,iBAkBC;QAjBQ,mBAAc,GAAd,cAAc,CAAgB;QAC9B,gBAAW,GAAX,WAAW,CAAa;QACxB,eAAU,GAAV,UAAU,CAAuB;QACjC,SAAI,GAAJ,IAAI,CAAY;QAChB,eAAU,GAAV,UAAU,CAAY;QACtB,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,mBAAc,GAAd,cAAc,CAAe;QAC7B,WAAM,GAAN,MAAM,CAAQ;QACd,kBAAa,GAAb,aAAa,CAAe;QAC5B,WAAM,GAAN,MAAM,CAAQ;QAErB,IAAI,CAAC,WAAW,CAAC,yBAAyB,EAAE;aACzC,IAAI,CAAC,cAAI;YACR,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC;YACrC,KAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC;QACrD,CAAC,CAAC,CAAC;QACL,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAED,kCAAc,GAAd;QAAA,iBAcC;QAbC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,cAAc,CAAC,uBAAuB,EAAE;aAC1C,IAAI,CAAC,UAAC,IAAS;YACd,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC;YAC1B,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QAC3B,CAAC,CAAC;aACD,KAAK,CAAC,aAAG;YACR,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,KAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC5B,CAAC,CAAC,CAAC;IAEP,CAAC;IAED,2BAAO,GAAP,UAAQ,GAAG;QACT,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,EAAE;YAC1B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;SAC5B;aAAM;YACL,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SACvB;IACH,CAAC;IAED,yBAAK,GAAL,UAAM,GAAW;QAAjB,iBAoCC;QAnCC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC;QAC1C,IAAI,QAAQ,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC,MAAM,GAAG,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC;QAC1D,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,yBAAyB,CAAC,CAAC;QAE1D,IAAI,SAAS,GAAG,YAAY,CAAC,OAAO,CAAC,MAAM,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC;QACtD,IAAI,GAAG,CAAC,MAAM,IAAI,SAAS,EAAE;YAC3B,IAAI,WAAW,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,SAAS,GAAG,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC;YAC5D,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,WAAW,CAAC;iBAC3C,IAAI,CAAC;gBACJ,KAAI,CAAC,eAAe,CAAC,GAAG,EAAE,WAAW,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;YAC5D,CAAC,CAAC;iBACD,KAAK,CAAC,aAAG;gBACR,KAAI,CAAC,eAAe,CAAC,GAAG,EAAE,WAAW,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;YAC5D,CAAC,CAAC,CAAC;SACN;aAAM;YACL,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,QAAQ,CAAC;iBACvC,IAAI,CAAC,eAAK;gBACT,OAAO,KAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,WAAW,CAAC;YACnD,CAAC,CAAC;iBACD,IAAI,CAAC,kBAAQ;gBACZ,OAAO,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;YACrD,CAAC,CAAC;iBACD,IAAI,CAAC,mBAAS;gBACb,OAAO,SAAS,CAAC,IAAI,CAAC,YAAE;oBACtB,OAAO,CAAC,IAAI,CAAC,iBAAO;wBAClB,OAAO,CAAC,OAAO,EAAE,CAAC;wBAClB,KAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,SAAS,EAAE,EAAE,CAAC,IAAI,CAAC;oBACxC,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;YACL,CAAC,CAAC;iBACD,KAAK,CAAC,aAAG;gBACR,KAAI,CAAC,eAAe,CAAC,GAAG,EAAE,WAAW,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;YAC5D,CAAC,CAAC,CAAC;SACN;IACH,CAAC;IAED,mCAAe,GAAf,UAAgB,GAAW,EAAE,WAAmB,EAAE,QAAgB,EAAE,OAAY;QAAhF,iBAkBC;QAjBC,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC;aAC9B,IAAI,CAAC,cAAI;YACR,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,CAAM,IAAI,CAAC,CAAC,CAAC;YACjC,OAAO,KAAI,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QAC7E,CAAC,CAAC;aACD,IAAI,CAAC,UAAC,SAAoB;YACzB,OAAO,SAAS,CAAC,IAAI,CAAC,cAAI;gBACxB,OAAO,CAAC,IAAI,CAAC,iBAAO;oBAClB,OAAO,CAAC,OAAO,EAAE,CAAC;oBAClB,YAAY,CAAC,OAAO,CAAC,MAAM,GAAG,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;oBAClD,KAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,SAAS,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC3C,CAAC,CAAC,CAAC;YACL,CAAC,CAAC;QACJ,CAAC,CAAC;aACD,KAAK,CAAC,aAAG;YACR,OAAO,CAAC,IAAI,CAAC,iBAAO,IAAI,cAAO,CAAC,OAAO,EAAE,EAAjB,CAAiB,CAAC;QAC5C,CAAC,CAAC;IACN,CAAC;IAED,4BAAQ,GAAR,UAAS,GAAW,EAAE,SAAS,EAAE,IAAY;QAA7C,iBAYC;QAXC,IAAI,GAAG,CAAC,IAAI,IAAI,KAAK,IAAI,GAAG,CAAC,IAAI,IAAI,MAAM,EAAE;YAC3C,IAAI,CAAC,SAAS,GAAS,MAAO,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC;SAChF;aAAM;YACL,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,EAAE,IAAI,CAAC,CAAC,KAAK,CACjD,aAAG,IAAI,YAAI,CAAC,UAAU,CAAC,WAAW,CAAC;gBACjC,WAAW,EAAE,MAAM,EAAE,OAAO,EAAE,yCAAyC;gBACvE,OAAO,EAAE,sCAAsC,GAAG,SAAS,CAAC,IAAI,GAAG,GAAG;aACvE,CAAC,EAHK,CAGL,CACH;SACF;IAEH,CAAC;IAEK,+BAAW,GAAjB,UAAkB,GAAW;;;;;4BACX,qBAAM,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;4BAClD,OAAO,EAAE,GAAG;4BACZ,WAAW,EAAE,IAAI;yBAClB,CAAC;;wBAHI,OAAO,GAAG,SAGd;wBACF,qBAAM,OAAO,CAAC,OAAO,EAAE;;wBAAvB,SAAuB,CAAC;wBACxB,sBAAO,OAAO,EAAC;;;;KAChB;IAED,8BAAU,GAAV;QACE,IAAI,EAAE,GAAG,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QAC5C,IAAI,EAAE,IAAI,SAAS,EAAE;YACnB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;SACnC;aAAM,IAAI,EAAE,IAAI,KAAK,EAAE;YACtB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;SAChC;aAAM;YACL,KAAK,CAAC,yBAAyB,CAAC,CAAC;SAClC;IACH,CAAC;IAhJU,SAAS;QANrB,+DAAS,CAAC;YACT,QAAQ,EAAE,UAAU;YACpB,yFAA8B;YAE9B,SAAS,EAAE,CAAC,+DAAM,EAAE,kFAAa,EAAE,2DAAU,EAAE,wEAAU,CAAC;;SAC3D,CAAC;yCAYyB,qFAAc;YACjB,8EAAW;YACZ,mGAAqB;YAC3B,2DAAU;YACJ,wEAAU;YACH,gEAAiB;YACpB,kFAAa;YACrB,sDAAM;YACC,kFAAa;YACpB,+DAAM;OApBZ,SAAS,CAkJrB;IAAD,gBAAC;CAAA;AAlJqB","file":"ayuda-ayuda-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { AyudaPage } from './ayuda.page';\r\nimport { ComunModule } from '../modulos/com/comun.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    ComunModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: AyudaPage\r\n      }\r\n    ])\r\n  ],\r\n  exports:[ComunModule],\r\n  declarations: [AyudaPage]\r\n})\r\nexport class AyudaPageModule {}\r\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"navegar('/app/home')\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-back\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>\\r\\n      MANUALES\\r\\n    </ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div *ngIf=\\\"loading == true\\\">\\r\\n    <ion-spinner class=\\\"main-spinner\\\" name=\\\"dots\\\" color=\\\"primary\\\"></ion-spinner>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"cargaExitosa == false\\\">\\r\\n    <p style=\\\"color:#888;padding:25px\\\">\\r\\n      No fue posible cargar los manuales.\\r\\n      <a (click)=\\\"cargarManuales()\\\">Reintentar</a>\\r\\n    </p>\\r\\n  </div>\\r\\n\\r\\n  <ion-list *ngIf=\\\"cargaExitosa == true\\\">\\r\\n    <ion-item button *ngFor=\\\"let man of manuales;\\\" (click)=\\\"abrir(man)\\\">\\r\\n      <ion-icon slot=\\\"start\\\" [name]=\\\"man.tipo == 'mp4' || man.tipo == 'webm' ? 'videocam' : 'book'\\\"></ion-icon>\\r\\n      <div style=\\\"width: 100%;font-size: 14px;\\\">\\r\\n        <h4>{{man.nombre}}</h4>\\r\\n        <p>{{man.descripcion}}</p>\\r\\n      </div>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n\\r\\n</ion-content>\\r\\n\\r\\n<div class=\\\"modal\\\" *ngIf=\\\"rutaVideo != null\\\">\\r\\n  <div class=\\\"content\\\">\\r\\n    <video controls=\\\"controls\\\" preload=\\\"metadata\\\" autoplay=\\\"autoplay\\\" class=\\\"videoPlayer\\\" controlsList=\\\"nodownload\\\">\\r\\n      <source [src]=\\\"rutaVideo | safeBypass:'resourceUrl'\\\" type=\\\"video/mp4\\\" />\\r\\n    </video>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<ion-footer color=\\\"light\\\" *ngIf=\\\"rutaVideo == null\\\">\\r\\n  <ion-item button (click)=\\\"actualizar()\\\" *ngIf=\\\"versionDisponible != version\\\">\\r\\n    <ion-icon slot=\\\"start\\\" name=\\\"arrow-round-up\\\" color=\\\"primary\\\"></ion-icon>\\r\\n    <div style=\\\"width: 100%;font-size: 14px;\\\">\\r\\n      <p style=\\\"float: left;color:#3ba2dc\\\">Versi√≥n {{versionDisponible}} disponible</p>\\r\\n      <p style=\\\"float: right;color:#aaa;\\\">v{{version}}</p>\\r\\n    </div>\\r\\n  </ion-item>\\r\\n  <ion-item *ngIf=\\\"versionDisponible == version\\\">\\r\\n    <div style=\\\"width: 100%;font-size: 14px;\\\">\\r\\n      <p style=\\\"float: right;color:#aaa;\\\">v{{version}}</p>\\r\\n    </div>\\r\\n  </ion-item>\\r\\n</ion-footer>\"","module.exports = \".videoPlayer {\\n  width: 100%;\\n  height: 100%; }\\n\\n.modal {\\n  position: fixed;\\n  top: 0px;\\n  left: 0px;\\n  width: 100%;\\n  height: 100%;\\n  background-color: #333333AA; }\\n\\n.modal .content {\\n  background-color: transparent;\\n  width: 90%;\\n  height: calc(100% - 80px);\\n  margin-top: 70px;\\n  margin-left: 5%;\\n  margin-bottom: 10px;\\n  margin-right: 5%; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXl1ZGEvQzpcXFVzZXJzXFxERUxMXFxEb3dubG9hZHNcXG9yaWdpbmFsXFxhcHBsZW9uYXJkb1xcYXBwL3NyY1xcYXBwXFxheXVkYVxcYXl1ZGEucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBVztFQUNYLFlBQVksRUFBQTs7QUFHaEI7RUFDSSxlQUFlO0VBQ2YsUUFBUTtFQUNSLFNBQVM7RUFDVCxXQUFXO0VBQ1gsWUFBWTtFQUNaLDJCQUEyQixFQUFBOztBQUcvQjtFQUNJLDZCQUE2QjtFQUM3QixVQUFVO0VBQ1YseUJBQXlCO0VBQ3pCLGdCQUFnQjtFQUNoQixlQUFlO0VBQ2YsbUJBQW1CO0VBQ25CLGdCQUFnQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvYXl1ZGEvYXl1ZGEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnZpZGVvUGxheWVye1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuXHJcbi5tb2RhbHtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIHRvcDogMHB4O1xyXG4gICAgbGVmdDogMHB4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzMzMzQUE7XHJcbn1cclxuXHJcbi5tb2RhbCAuY29udGVudHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gICAgd2lkdGg6IDkwJTtcclxuICAgIGhlaWdodDogY2FsYygxMDAlIC0gODBweCk7XHJcbiAgICBtYXJnaW4tdG9wOiA3MHB4O1xyXG4gICAgbWFyZ2luLWxlZnQ6IDUlO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICAgIG1hcmdpbi1yaWdodDogNSU7XHJcbn0iXX0= */\"","import { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { SesionService } from '../modulos/com/services/sesion.service';\r\nimport { Market } from '@ionic-native/market/ngx';\r\nimport { ManualService } from '../modulos/com/services/manual.service';\r\nimport { Manual } from '../modulos/com/entities/manual';\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { File as FilePlugin, FileEntry } from '@ionic-native/file/ngx';\r\nimport { FileOpener } from '@ionic-native/file-opener/ngx';\r\nimport { MensajeUsuarioService } from '../modulos/com/services/mensaje-usuario.service';\r\nimport { AuthService } from '../modulos/com/services/auth.service';\r\nimport { OfflineService } from '../modulos/com/services/offline.service';\r\n\r\n@Component({\r\n  selector: 'sm-ayuda',\r\n  templateUrl: 'ayuda.page.html',\r\n  styleUrls: ['ayuda.page.scss'],\r\n  providers: [Market, ManualService, FilePlugin, FileOpener]\r\n})\r\nexport class AyudaPage {\r\n\r\n  manuales: Manual;\r\n  loading: boolean;\r\n  cargaExitosa: boolean;\r\n  rutaVideo: string;\r\n\r\n  version: string;\r\n  versionDisponible: string;\r\n\r\n  constructor(\r\n    public offlineService: OfflineService,\r\n    public authService: AuthService,\r\n    public msgService: MensajeUsuarioService,\r\n    public file: FilePlugin,\r\n    public fileOpener: FileOpener,\r\n    public loadingController: LoadingController,\r\n    public sessionService: SesionService,\r\n    public router: Router,\r\n    public manualService: ManualService,\r\n    public market: Market\r\n  ) {\r\n    this.authService.consultarUpdateDisponible()\r\n      .then(resp => {\r\n        this.version = resp['versionActual'];\r\n        this.versionDisponible = resp['versionDisponible'];\r\n      });\r\n    this.cargarManuales();\r\n  }\r\n\r\n  cargarManuales() {\r\n    this.loading = true;\r\n    this.cargaExitosa = null;\r\n    this.offlineService.queryManualesPorUsuario()\r\n      .then((resp: any) => {\r\n        this.manuales = resp.data;\r\n        this.loading = false;\r\n        this.cargaExitosa = true;\r\n      })\r\n      .catch(err => {\r\n        this.loading = false;\r\n        this.cargaExitosa = false;\r\n      });\r\n\r\n  }\r\n\r\n  navegar(url) {\r\n    if (this.rutaVideo == null) {\r\n      this.router.navigate([url])\r\n    } else {\r\n      this.rutaVideo = null;\r\n    }\r\n  }\r\n\r\n  abrir(man: Manual) {\r\n    this.rutaVideo = null;\r\n    let workingPath = this.file.dataDirectory;\r\n    let fileName = man.id + \"_\" + man.codigo + \".\" + man.tipo;\r\n    let loading = this.showLoading('Accediendo al manual...');\r\n\r\n    let codManAnt = localStorage.getItem('man_' + man.id);\r\n    if (man.codigo != codManAnt) {\r\n      let oldFileName = man.id + \"_\" + codManAnt + \".\" + man.tipo;\r\n      this.file.removeFile(workingPath, oldFileName)\r\n        .then(() => {\r\n          this.descargarManual(man, workingPath, fileName, loading);\r\n        })\r\n        .catch(err => {\r\n          this.descargarManual(man, workingPath, fileName, loading);\r\n        });\r\n    } else {\r\n      this.file.checkFile(workingPath, fileName)\r\n        .then(exist => {\r\n          return this.file.resolveDirectoryUrl(workingPath)\r\n        })\r\n        .then(dirEntry => {\r\n          return this.file.getFile(dirEntry, fileName, null);\r\n        })\r\n        .then(fileEntry => {\r\n          return fileEntry.file(fp => {\r\n            loading.then(loadPop => {\r\n              loadPop.dismiss();\r\n              this.openFile(man, fileEntry, fp.type)\r\n            });\r\n          });\r\n        })\r\n        .catch(err => {\r\n          this.descargarManual(man, workingPath, fileName, loading);\r\n        });\r\n    }\r\n  }\r\n\r\n  descargarManual(man: Manual, workingPath: string, fileName: string, loading: any) {\r\n    this.manualService.descargar(man)\r\n      .then(resp => {\r\n        var blob = new Blob([<any>resp]);\r\n        return this.file.writeFile(workingPath, fileName, blob, { replace: true });\r\n      })\r\n      .then((fileEntry: FileEntry) => {\r\n        return fileEntry.file(file => {\r\n          loading.then(loadPop => {\r\n            loadPop.dismiss();\r\n            localStorage.setItem('man_' + man.id, man.codigo);\r\n            this.openFile(man, fileEntry, file.type);\r\n          });\r\n        })\r\n      })\r\n      .catch(err => {\r\n        loading.then(loadPop => loadPop.dismiss())\r\n      })\r\n  }\r\n\r\n  openFile(man: Manual, fileEntry, type: string) {\r\n    if (man.tipo == 'mp4' || man.tipo == 'webm') {\r\n      this.rutaVideo = (<any>window).Ionic.WebView.convertFileSrc(fileEntry.toURL());\r\n    } else {\r\n      this.fileOpener.open(fileEntry.toURL(), type).catch(\r\n        err => this.msgService.showMessage({\r\n          tipoMensaje: 'info', mensaje: 'No ha sido posible visualizar el manual',\r\n          detalle: \"No existe una aplicacion para abrir \" + fileEntry.name + \".\"\r\n        })\r\n      )\r\n    }\r\n\r\n  }\r\n\r\n  async showLoading(msg: string) {\r\n    const loading = await this.loadingController.create({\r\n      message: msg,\r\n      translucent: true,\r\n    });\r\n    await loading.present();\r\n    return loading;\r\n  }\r\n\r\n  actualizar() {\r\n    let so = localStorage.getItem('plataforma');\r\n    if (so == 'android') {\r\n      this.market.open('co.sigess.app');\r\n    } else if (so == 'ios') {\r\n      this.market.open('1473016574');\r\n    } else {\r\n      alert(\"Plataforma no detectada\");\r\n    }\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}